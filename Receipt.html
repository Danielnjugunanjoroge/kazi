<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Receipt - ONE STOP</title>

<style>
:root{
  --dark:#111;
  --accent:#2E8B57;
  --muted:#f4f6f8;
  --card:#ffffff;
  --danger:#c0392b;
}

body{
  margin:0;
  font-family: Arial, Helvetica, sans-serif;
  background:var(--muted);
  color:#222;
}

header{
  background:var(--dark);
  padding:12px 16px;
  color:#fff;
  text-align:center;
  font-size:1.2rem;
  font-weight:bold;
}

.container{
  max-width:600px;
  background:var(--card);
  margin:30px auto;
  padding:22px;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

h2{
  text-align:center;
  color:var(--accent);
}

.info{
  margin-bottom:15px;
  background:#f7faf7;
  padding:12px;
  border-radius:8px;
}

table{
  width:100%;
  border-collapse:collapse;
}

th, td{
  padding:10px;
  border-bottom:1px solid #eee;
}

th{
  text-align:left;
}

.total-box{
  margin-top:15px;
  font-size:1.2rem;
  font-weight:bold;
  text-align:right;
  color:var(--accent);
}

.btn-area{
  margin-top:20px;
  display:flex;
  justify-content:space-between;
}

button{
  padding:10px 16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}

.print-btn{
  background:var(--accent);
  color:white;
}

.home-btn{
  background:var(--dark);
  color:white;
}

/* Mobile Responsive */
@media(max-width:600px){
  .btn-area{
    flex-direction:column;
    gap:10px;
  }
}
</style>
</head>

<body>
<header>ONE STOP RECEIPT</header>

<div class="container">
  <h2>Purchase Receipt</h2>

  <div class="info">
    <strong>Date:</strong> <span id="receiptDate"></span><br>
    <strong>Payment Method:</strong> <span id="method"></span>
  </div>

  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th style="width:80px;">Price</th>
      </tr>
    </thead>
    <tbody id="receiptBody"></tbody>
  </table>

  <div class="total-box" id="receiptTotal"></div>

  <div class="btn-area">
    <button class="print-btn" onclick="window.print()">Print Receipt</button>
    <button class="home-btn" onclick="goHome()">Home</button>
  </div>
</div>

<script>
function loadReceipt(){
  const cart = JSON.parse(localStorage.getItem("one_stop_cart") || "[]");
  const payment = JSON.parse(localStorage.getItem("one_stop_payment") || "{}");
  const body = document.getElementById("receiptBody");
  const totalEl = document.getElementById("receiptTotal");
  const methodEl = document.getElementById("method");
  const dateEl = document.getElementById("receiptDate");

  body.innerHTML = "";
  let total = 0;

  cart.forEach(item=>{
    total += Number(item.price);
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${item.name}</td>
      <td>Ksh ${item.price}</td>
    `;
    body.appendChild(row);
  });

  totalEl.textContent = "Total Paid: Ksh " + total;
  methodEl.textContent = payment.method || "N/A";
  dateEl.textContent = new Date().toLocaleString();
}

function goHome(){
  // Clear cart after successful purchase
  localStorage.setItem("one_stop_cart", "[]");
  window.location.href = "index.html";
}

loadReceipt();
</script>

</body>
</html>
